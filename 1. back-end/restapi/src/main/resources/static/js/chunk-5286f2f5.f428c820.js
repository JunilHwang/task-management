(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5286f2f5"],{"0a69":function(t,e,n){"use strict";n("96cf");var a=n("1da1"),r=n("d4ec"),c=n("bee2"),s=n("5a8b"),i=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,null,[{key:"init",value:function(e){t.instance=e}},{key:"getList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(n){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.instance,e.next=3,a.getApiData(s["a"].getTaskList(n||a.$route.params.pidx));case 3:r=e.sent,a.$store.commit("setState",["taskList",r.list]);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(n){var a,r,c,i,o,u,l,p,m,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.instance,r=n.target,c=r.title.value,i=r.parent.value,o="".concat(r.start.value," ").concat(r.start_h.value,":").concat(r.start_m.value,":00"),u="".concat(r.limit.value," ").concat(r.limit_h.value,":").concat(r.limit_m.value,":00"),l=r.description.value,p=a.$route.params.pidx,m={pidx:p,parent:i,title:c,start_date:o,limit_date:u,description:l},e.next=6,a.getApiData(s["a"].postTask(m));case 6:return e.next=8,a.getApiData(s["a"].getTaskList(a.$route.params.pidx));case 8:d=e.sent,a.$store.commit("setState",["taskList",d.list]),a.$store.commit("closeLayer"),alert("완료되었습니다.");case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setState",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(n){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.instance,r=a.$route.params.tidx,e.next=4,a.getApiData(s["a"].putTaskState({state:n,tidx:r}));case 4:t.getOne();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getOne",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var n,a,r,c,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:null,a=t.instance,r=n||a.$route.params.tidx,e.next=5,a.getApiData(s["a"].getTask(r));case 5:return c=e.sent,null==n&&a.$store.commit("setState",["nowTask",c.task]),e.abrupt("return",c.task);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(confirm("정말로 삭제하시겠습니까?")){e.next=2;break}return e.abrupt("return");case 2:return n=t.instance,e.next=5,n.getApiData(s["a"].deleteTask(n.task.tidx));case 5:n.$router.push("/project/view/"+n.task.pidx);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(n){var a,r,c,i,o,u,l,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.instance,r=n.target,c=r.title.value,i="".concat(r.start.value," ").concat(r.start_h.value,":").concat(r.start_m.value,":00"),o="".concat(r.limit.value," ").concat(r.limit_h.value,":").concat(r.limit_m.value,":00"),u=r.description.value,l=a.tidx,p={tidx:l,title:c,start_date:i,limit_date:o,description:u},e.next=6,a.getApiData(s["a"].putTask(p));case 6:alert("완료되었습니다."),a.$store.commit("closeLayer"),t.getOne(),null!==a.calendarConn&&a.updateCalendar(p);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCommits",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var n,a,r,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.instance,a=n.task,r=a.tidx,c=a.parent,e.next=6,n.getApiData(s["a"].getCommits(r));case 6:if(i=e.sent,!a.parent){e.next=13;break}return e.next=10,t.getOne(c);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=null;case 14:n.parent=e.t0,n.commits=i.commits;case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getOnCalendar",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var n,a,r,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.instance,a=n.task.tidx,r=n.$store.state.member.midx,e.next=5,n.getApiData(s["a"].getTaskOnCalendar({tidx:a,midx:r}));case 5:c=e.sent,n.calendarConn=c.data;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}();e["a"]=i},"21d9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"task-view"},[null!==t.task?[n("div",{staticClass:"task-wrap"},[n("header",{staticClass:"task-title"},[n("span",{class:"color-label color"+(t.task.state+1)}),n("span",{staticClass:"task-name",domProps:{innerHTML:t._s(t.task.title)}}),n("span",{staticClass:"reg-date"},[n("i",{staticClass:"far fa-calendar-alt"}),t._v("\n          "+t._s(t.getDateFormat(t.task.register_date))+"\n        ")])]),n("div",{staticClass:"task-info"},[n("p",[n("strong",{staticClass:"lbl"},[t._v("기간")]),n("span",{domProps:{innerHTML:t._s(t.getRange(t.task.start_date,t.task.limit_date))}}),null===t.calendarConn?n("a",{staticClass:"btn mini social-google left-margin",attrs:{href:"#"},on:{click:t.insertCalendar}},[n("i",{staticClass:"fab fa-google-plus-g"}),t._v("\n            Calendar 등록\n          ")]):t._e()]),n("p",[n("strong",{staticClass:"lbl"},[t._v("종료")]),n("span",{domProps:{innerHTML:t._s(t.getRemaining(t.task.limit_date))}})]),n("p",[n("strong",{staticClass:"lbl"},[t._v("선행")]),null===t.parent?n("span",[t._v("없습니다.")]):n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.change("/task/view/"+t.parent.tidx)}}},[n("span",{class:"color-label color"+(t.parent.state+1)}),t._v("\n            "+t._s(t.parent.title)+" / \n            "+t._s(t.contentPreview(t.parent.description,40))+"\n          ")])]),null!==t.calendarConn&&1!==t.calendarConn?n("p",[n("strong",{staticClass:"lbl"},[t._v("달력")]),n("a",{staticClass:"btn mini social-naver",attrs:{href:t.calendarConn.html_url,target:"_blank"}},[n("i",{staticClass:"far fa-calendar-alt"}),t._v("\n            조회\n          ")]),n("a",{staticClass:"btn mini social-google",attrs:{href:"#"},on:{click:t.deleteCalendar}},[n("i",{staticClass:"far fa-calendar-alt"}),t._v("\n            삭제\n          ")])]):t._e()]),n("div",{staticClass:"task-content",domProps:{innerHTML:t._s((t.task.description+"").replace(/\n/gi,"<br />"))}}),n("commitList",{attrs:{commits:t.commits}}),n("commentList")],1),n("div",{staticClass:"btn-group"},[n("router-link",{staticClass:"btn default",attrs:{to:"/project/view/"+t.task.pidx}},[t._v("목록으로")]),n("a",{staticClass:"btn submit",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.$store.commit("openLayer","taskUpdate")}}},[t._v("수정하기")]),n("a",{staticClass:"btn submit",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.TaskCore.delete(e)}}},[t._v("삭제하기")]),1!=t.task.state?n("a",{staticClass:"btn complete",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.TaskCore.setState(1)}}},[t._v("완료")]):t._e(),2!=t.task.state?n("a",{staticClass:"btn error",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.TaskCore.setState(2)}}},[t._v("에러")]):t._e(),0!=t.task.state?n("a",{staticClass:"btn process",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.TaskCore.setState(0)}}},[t._v("진행")]):t._e()],1)]:t._e()],2)},r=[],c=(n("96cf"),n("1da1")),s=n("0a69"),i=n("5a8b"),o={components:{commitList:function(){return n.e("chunk-32da7090").then(n.bind(null,"2f79"))},commentList:function(){return n.e("chunk-2d0e64c6").then(n.bind(null,"97c5"))}},created:function(){s["a"].init(this),this.load()},computed:{task:function(){return this.$store.state.nowTask}},data:function(){return{TaskCore:s["a"],parent:null,commits:[],calendarConn:1,gapiCalendar:null}},methods:{load:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].getOne();case 2:return t.next=4,s["a"].getCommits();case 4:return t.next=6,s["a"].getOnCalendar();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),change:function(t){this.$router.push(t),this.load()},gapiInit:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.gapiCalendar||new Promise(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(n){var a,r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.member.google_access_token.length){t.next=9;break}return t.next=3,e.$gAuth.signIn();case 3:return a=t.sent,r=e.$store.state.member.midx,s=a.Zi.access_token,t.next=8,e.getApiData(i["a"].putMemberGoogleToken({midx:r,token:s}));case 8:e.$store.state.member.google_access_token=s;case 9:window.gapi.load("client:auth2",Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.gapi.client.init(e.getGoogleConfig());case 2:e.gapiCalendar=window.gapi.client.calendar,n(window.gapi.client.calendar);case 4:case"end":return t.stop()}},t,this)})));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),insertCalendar:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n,a,r,s,o,u,l,p,m,d,f,k=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state.member,n=this.task,a="Asia/Seoul",r="[PTM][".concat(n.project_title,"] ").concat(n.title),s=n.description,o=e.email,u=this.moment(n.start_date).format(),l=this.moment(n.limit_date).format(),p=e.midx,m=n.tidx,d={summary:r,description:s,start:{dateTime:u,timeZone:a},end:{dateTime:l,timeZone:a},attendees:[{email:o}]},t.next=13,this.gapiInit();case 13:f=t.sent,f.events.insert({calendarId:"primary",resource:d}).execute(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("confirmed"!==e.status){t.next=8;break}return n=e.id,a=e.htmlLink,r={midx:p,tidx:m,id:n,html_url:a},t.next=6,k.getApiData(i["a"].postTaskOnCalendar(r));case 6:k.calendarConn=r,alert("추가되었습니다.");case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deleteCalendar:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(confirm("정말로 삭제하시겠습니까?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.gapiInit();case 4:e=t.sent,e.events.delete({calendarId:"primary",eventId:this.calendarConn.id}).execute(Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.getApiData(i["a"].deleteTaskOnCalendar(n.calendarConn.id));case 2:n.calendarConn=null,alert("삭제 되었습니다");case 4:case"end":return t.stop()}},t,this)})));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},u=o,l=(n("aea6"),n("2877")),p=Object(l["a"])(u,a,r,!1,null,"56ef2285",null);p.options.__file="view.vue";e["default"]=p.exports},"5a8b":function(t,e,n){"use strict";var a=n("d4ec"),r=n("bee2"),c=n("bc3a"),s=n.n(c),i="/api",o=function(){function t(){Object(a["a"])(this,t)}return Object(r["a"])(t,[{key:"postMember",value:function(t){return s.a.post("".concat(i,"/member"),t)}},{key:"getMemberOnProject",value:function(t){return s.a.get("".concat(i,"/memberOnProject/").concat(t))}},{key:"putMemberGoogleToken",value:function(t){return s.a.put("".concat(i,"/member/google-token"),t)}},{key:"getProjectList",value:function(t){return s.a.get("".concat(i,"/projects/").concat(t))}},{key:"getProject",value:function(t){return s.a.get("".concat(i,"/project/").concat(t))}},{key:"postProject",value:function(t){return s.a.post("".concat(i,"/project"),t)}},{key:"postProjectAccess",value:function(t){return s.a.post("".concat(i,"/project/access"),t)}},{key:"putProject",value:function(t){return s.a.put("".concat(i,"/project"),t)}},{key:"putProjectStar",value:function(t){return s.a.put("".concat(i,"/project/star"),t)}},{key:"deleteProject",value:function(t){return s.a.delete("".concat(i,"/project/").concat(t))}},{key:"postTask",value:function(t){return s.a.post("".concat(i,"/task"),t)}},{key:"getTask",value:function(t){return s.a.get("".concat(i,"/task/").concat(t))}},{key:"getTaskList",value:function(t){return s.a.get("".concat(i,"/tasks/").concat(t))}},{key:"getTaskListRecently",value:function(t){return s.a.get("".concat(i,"/task/recently/").concat(t))}},{key:"putTask",value:function(t){return s.a.put("".concat(i,"/task"),t)}},{key:"putTaskState",value:function(t){var e=["process","complete","error"],n="".concat(i,"/task/").concat(e[t.state]);return s.a.put("".concat(n,"/").concat(t.tidx))}},{key:"getTaskOnCalendar",value:function(t){return s.a.get("".concat(i,"/task-on-calendar"),{params:t})}},{key:"postTaskOnCalendar",value:function(t){return s.a.post("".concat(i,"/task-on-calendar"),t)}},{key:"putTaskOnCalendar",value:function(t){return s.a.put("".concat(i,"/task-on-calendar"),{params:t})}},{key:"deleteTaskOnCalendar",value:function(t){return s.a.delete("".concat(i,"/task-on-calendar/").concat(t))}},{key:"deleteTask",value:function(t){return s.a.delete("".concat(i,"/task/").concat(t))}},{key:"putViewDate",value:function(){throw"don't putViewDate impolemented"}},{key:"getCommentList",value:function(t){return s.a.get("".concat(i,"/comments/").concat(t))}},{key:"getCommentRecentlyList",value:function(t){return s.a.get("".concat(i,"/comment/recently/").concat(t))}},{key:"getComment",value:function(t){return s.a.get("".concat(i,"/comment/").concat(t))}},{key:"postComment",value:function(t){return s.a.post("".concat(i,"/comment/").concat(t.tidx),t)}},{key:"postCommentReply",value:function(t){return s.a.post("".concat(i,"/comment/reply"),t)}},{key:"putComment",value:function(t){return s.a.put("".concat(i,"/comment"),t)}},{key:"deleteComment",value:function(t){return s.a.delete("".concat(i,"/comment/").concat(t))}},{key:"getRepos",value:function(t){return s.a.get("".concat(i,"/github/repos/").concat(t))}},{key:"getCommits",value:function(t){return s.a.get("".concat(i,"/github/commit/").concat(t))}},{key:"postRepo",value:function(t){return s.a.post("".concat(i,"/github/repo"),t)}},{key:"postTaskCommit",value:function(t){return s.a.post("".concat(i,"/github/match"),t)}},{key:"deleteRepo",value:function(t){return s.a.delete("".concat(i,"/github/repo/").concat(t))}},{key:"deleteCommitOnTask",value:function(t,e){return s.a.delete("".concat(i,"/github/match/").concat(t,"/").concat(e))}}]),t}();e["a"]=new o},"8d9b":function(t,e,n){},aea6:function(t,e,n){"use strict";var a=n("8d9b"),r=n.n(a);r.a},bee2:function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}n.d(e,"a",function(){return r})},d4ec:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return a})}}]);
//# sourceMappingURL=chunk-5286f2f5.f428c820.js.map